---
description: ドキュメントをAIが正確に解釈・実行できるように最適化する。
  「AI向けに最適化」「ドキュメントを最適化」「optimize for AI」「AI最適化」などのリクエストで使用。
---

# Optimizing Docs for AI

ドキュメントをAI（LLM）が正確に解釈・実行できるように最適化する。

引数 `$ARGUMENTS` でドキュメントパスを受け取る。省略時はAskUserQuestionで確認。

## 処理フロー

### 1. ドキュメントの読み込みと分類

Readツールでドキュメント全体を読み込み、種別を判定する。

| 種別 | 例 | 最適化の重点 |
|------|-----|-------------|
| 指示書 | CLAUDE.md、SKILL.md | 実行精度（条件分岐、優先順位の明確化） |
| リファレンス | reference.md、API仕様 | 検索性（見出し構造、テーブル化） |
| 説明書 | README.md、ガイド | 理解しやすさ（構造化、前提の明示） |

### 2. 6つの観点で改善点を特定

各観点ごとに改善箇所を洗い出す。

#### 観点1: 簡潔性

LLMのcontext windowは有限。不要な情報はノイズになり判断精度を下げる。

| 改善パターン | 改善前 | 改善後 |
|-------------|--------|--------|
| Claudeが既知の情報 | 「gitは分散バージョン管理システムで…」 | 削除 |
| 冗長な説明 | 「〜することが非常に重要です。必ず〜してください」 | 「必須: 〜する」 |
| 重複記載 | 同じルールが2箇所に記載 | 1箇所にまとめて参照 |

#### 観点2: 明示性

暗黙の前提や曖昧な条件はLLMの誤解釈の原因になる。

| 改善パターン | 改善前 | 改善後 |
|-------------|--------|--------|
| 理由なし指示 | 「〜してください」 | 「〜する。**理由**: 〜のため」 |
| 暗黙の条件分岐 | 「適切に対応する」 | テーブルで条件と対応を列挙 |
| 曖昧な範囲 | 「関連ファイルを更新」 | 具体的なファイルパスを列挙 |

#### 観点3: 構造化

LLMはテーブルと見出し階層を高精度で解釈する。散文より構造化データが有効。

| 改善パターン | 改善前 | 改善後 |
|-------------|--------|--------|
| 散文の条件分岐 | 「AならX、BならY、CならZ」 | 条件→対応のテーブル |
| 長い段落 | 30行超の説明文 | 見出し分割+箇条書き |
| 見出し階層の飛び | `#` → `###` | `#` → `##` → `###` |
| 比較・一覧情報 | 箇条書きの羅列 | テーブル化 |

#### 観点4: 十分性

手順の欠落やエッジケースの未記載はLLMの即興的判断を招く。

| 改善パターン | 改善前 | 改善後 |
|-------------|--------|--------|
| 不足する前提条件 | 「テストを実行」 | 「`mise exec -- rspec`でテストを実行」 |
| エラー処理の欠落 | 正常系のみ | エラーパターンと対処のテーブル追加 |
| 例外の未記載 | 「コミットする」 | 「コミットする。ただし秘匿情報を含む場合は中止」 |

#### 観点5: 一貫性

同じ概念に異なる用語を使うとLLMは別の概念と誤認する。

| 改善パターン | 改善前 | 改善後 |
|-------------|--------|--------|
| 用語の揺れ | 「スキル」と「skill」が混在 | 「スキル」に統一 |
| 形式の不統一 | テーブルと箇条書きが混在 | 同種の情報は同形式に統一 |

#### 観点6: 優先順位と重要度

LLMは文書の先頭と明示的な重要度マーカーに影響を受ける。

| 改善パターン | 改善前 | 改善後 |
|-------------|--------|--------|
| 重要項目が埋没 | 文末に重要ルール | 文書先頭または専用セクションに移動 |
| 優先順位が不明 | 同列で並ぶルール群 | 優先度カラム追加、または順序で表現 |

### 3. ユーザーへの確認

以下の場合はAskUserQuestionで確認:

| 場合 | 確認内容 |
|------|---------|
| セクションの追加・削除 | 「このセクションは不要に見えますが削除してよいですか？」 |
| 意図が不明確 | 「この指示の意図は〜ですか？」 |
| 情報の不足 | 「〜の条件が不明です。追記してよいですか？」 |

明らかな構造改善（テーブル化、見出し整理等）は確認不要で適用。

### 4. 改善の適用

Editツールで改善を適用する。

### 5. 変更レポートの出力

以下の形式で報告:

```markdown
## 最適化レポート

### 変更サマリー

| 観点 | 変更数 |
|------|--------|
| 簡潔性 | N箇所 |
| 明示性 | N箇所 |
| 構造化 | N箇所 |
| 十分性 | N箇所 |
| 一貫性 | N箇所 |
| 優先順位 | N箇所 |

### 主な変更点

- **簡潔性**: {具体的な変更内容}
- **明示性**: {具体的な変更内容}
- ...
```

## 制約事項

| 種別 | 内容 | 理由 |
|------|------|------|
| 禁止 | 元の意図を変更する | 最適化であり書き換えではない |
| 禁止 | 推測で情報を追加する | 誤情報はLLMの誤動作に直結 |
| 禁止 | 既存の命名規則を無視した構造変更 | プロジェクトの一貫性を壊す |
| 必須 | Readツールで読み込んでから編集 | 全体を把握せずに部分編集すると整合性が崩れる |
